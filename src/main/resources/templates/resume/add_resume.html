<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/layout}">

<th:block layout:fragment="css">
    <link th:href="@{/css/add_member.css}" rel="stylesheet">
</th:block>

<th:block layout:fragment="script">
    <script th:inline="javascript">
        $(document).ready(function() {
            let errorMessage = [[${errorMessage}]]; //Model 객체로부터 errorMessage를 전달받음
            if(errorMessage != null) {
                alert(errorMessage);
            }
        });
    </script>
</th:block>

<div layout:fragment="content">
    <h1>이력서 등록</h1>
    <form action="/resume/list/add" role="form" method="post" th:object="${resumeFormDto}">
        <!-- 이력서 이름 -->
        <div class="mb-3">
            <label for="resumeName" class="form-label">이력서 이름</label>
            <input type="text" class="form-control" id="resumeName" th:field="*{resumeName}" placeholder="이력서 이름을 입력하세요">
            <p th:if="${#fields.hasErrors('resumeName')}" th:errors="*{resumeName}" class="fieldError">오류처리</p>
        </div>

        <!-- 사용자 이름 -->
        <input type="hidden" id="memberId" th:field="*{memberId}">
        <div class="mb-3">
            <label for="name" class="form-label">사용자 이름</label>
            <input type="text" class="form-control" id="name"  th:value="${userDetail.name}" placeholder="이름을 입력하세요" readonly>
        </div>

        <div class="mb-3">
            <label for="phone" class="form-label">사용자 전화번호</label>
            <input type="text" class="form-control" id="phone"  th:value="${userDetail.phone}"placeholder="전화번호를 입력하세요" readonly>
        </div>

        <div class="mb-3">
            <label for="address" class="form-label">사용자 주소</label>
            <input type="text" class="form-control" id="address"  th:value="${userDetail.address}" placeholder="주소를 입력하세요" readonly>
        </div>

        <div class="mb-3">
            <label for="email" class="form-label">사용자 이메일</label>
            <input type="email" class="form-control" id="email"  th:value="${userDetail.email}" placeholder="이메일을 입력하세요" readonly>
        </div>

        <!-- 최종학력 -->
        <div class="mb-3">
            <label for="finalEducation" class="form-label">최종학력</label>
            <input type="text" class="form-control" id="finalEducation" th:field="*{finalEducation}" placeholder="최종학력을 입력하세요">
            <p th:if="${#fields.hasErrors('finalEducation')}" th:errors="*{finalEducation}" class="fieldError">오류처리</p>
        </div>

        <!-- 전공 -->
        <div class="mb-3">
            <label for="major" class="form-label">전공</label>
            <input type="text" class="form-control" id="major" th:field="*{major}" placeholder="전공을 입력하세요">
            <p th:if="${#fields.hasErrors('major')}" th:errors="*{major}" class="fieldError">오류처리</p>
        </div>

        <!-- 경력 -->
        <div class="mb-3">
            <label for="career" class="form-label">경력</label>
            <input type="text" class="form-control" id="career" th:field="*{career}" placeholder="경력을 입력하세요">
            <p th:if="${#fields.hasErrors('career')}" th:errors="*{career}" class="fieldError">오류처리</p>
        </div>

        <!-- 기술 스택 -->
        <div class="mb-3">
            <label for="skill" class="form-label">기술 스택</label>
            <input type="text" class="form-control" id="skill" th:field="*{skill}" placeholder="기술 스택을 입력하세요">
            <p th:if="${#fields.hasErrors('skill')}" th:errors="*{skill}" class="fieldError">오류처리</p>
        </div>

        <!-- 자격증 -->
        <div class="mb-3">
            <label for="certificate" class="form-label">자격증</label>
            <input type="text" class="form-control" id="certificate" th:field="*{certificate}" placeholder="자격증을 입력하세요">
            <p th:if="${#fields.hasErrors('certificate')}" th:errors="*{certificate}" class="fieldError">오류처리</p>
        </div>

        <!-- 가능한 언어 -->
        <div class="mb-3">
            <label for="language" class="form-label">가능 언어</label>
            <input type="text" class="form-control" id="language" th:field="*{language}" placeholder="구술 언어를 입력하세요">
            <p th:if="${#fields.hasErrors('language')}" th:errors="*{language}" class="fieldError">오류처리</p>
        </div>

        <!-- 자기소개 -->
        <div class="mb-3">
            <label for="introduction" class="form-label">자기소개</label>
            <textarea class="form-control" id="introduction" th:field="*{introduction}" placeholder="자기소개를 입력하세요"></textarea>
            <p th:if="${#fields.hasErrors('introduction')}" th:errors="*{introduction}" class="fieldError">오류처리</p>
        </div>

        <!-- CSRF 토큰 처리 -->
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">

        <!-- 제출 버튼 -->
        <button type="submit" class="btn btn-primary">등록</button>
    </form>
</div>

</html>